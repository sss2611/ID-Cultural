<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crear Borrador - DNI Cultural</title>
  <link rel="stylesheet" href="../../../../static/css/main.css">
  <link rel="stylesheet" href="../../../../static/css/dashboard.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
</head>

<body>
  <header>
    <div class="logo">
      <img src="static/img/SANTAGO-DEL-ESTERO-2022.svg" alt="Logo Santiago del Estero">
    </div>
    <nav>
      <ul>
        <li><a class="menu" href="src/views/pages/public/Index.html">Inicio </a></li>
        <li><a class="menu" href="src/views/pages/auth/login.html">Cerrar Sesión </a></li>
      </ul>
    </nav>
  </header>

  <main class="dashboard-container animate__animated animate__fadeIn">
    <div class="info-proceso">
      <h2>Crear Borrador de Perfil Cultural</h2>

      <p>¡Bienvenido/a a <strong>Id Cultural</strong>! Este es el primer paso para compartir tu talento con la
        comunidad. Aquí puedes empezar a construir tu perfil de artista sin apuros.</p>

      <p>El proceso es simple:</p>

      <ol>
        <li>
          <strong>Crea tu Borrador:</strong> Completa el formulario. Puedes usar el botón <strong>"Guardar
            Borrador"</strong> las veces que necesites para guardar tu progreso y continuar más tarde.
        </li>
        <li>
          <strong>Envía a Validación:</strong> Cuando tu perfil esté listo, envíalo para que nuestro equipo lo revise.
        </li>
        <li>
          <strong>Forma parte de la Wiki:</strong> Una vez aprobado, tu perfil será publicado en la <strong>Wiki de
            Artistas</strong>, donde tu trabajo tendrá la visibilidad que merece.
        </li>
      </ol>
    </div>
    <form id="form-borrador" class="borrador-form">
      <label for="titulo">
        <i class="fa-solid fa-signature fa-fw"></i> Título de la Obra:
      </label>
      <input type="text" id="titulo" name="titulo" placeholder="Ej. Retrato de mi tierra" required>

      <label for="descripcion">
        <i class="fa-solid fa-align-left fa-fw"></i> Descripción:
      </label>
      <textarea id="descripcion" name="descripcion" placeholder="Escribe una breve descripción de tu obra..." rows="5"
        required></textarea>

      <label for="categoria">
        <i class="fa-solid fa-palette fa-fw"></i> Categoría Cultural:
      </label>
      <select id="categoria" name="categoria" required>
        <option value="">-- Seleccionar --</option>
        <option value="musica">Música</option>
        <option value="literatura">Literatura</option>
        <option value="artes_visuales">Artes Visuales (Pintura, Fotografía, etc.)</option>
        <option value="escultura">Escultura</option>
        <option value="artesanias">Artesanías</option>
        <option value="danza">Danza</option>
        <option value="teatro">Teatro</option>
        <option value="otro">Otro</option>
      </select>

      <div id="campos-condicionales-container">

        <div id="campos-musica" class="campos-extra" style="display: none;">
          <label for="plataformas">Plataformas Digitales:</label>
          <input type="text" id="plataformas" name="plataformas" placeholder="Enlace a Spotify, YouTube, etc.">

          <label for="sello">Sello Discográfico (opcional):</label>
          <input type="text" id="sello" name="sello">
        </div>

        <div id="campos-literatura" class="campos-extra" style="display: none;">
          <label for="genero-lit">Género Literario:</label>
          <input type="text" id="genero-lit" name="genero-lit" placeholder="Novela, Poesía, etc.">

          <label for="editorial">Editorial (opcional):</label>
          <input type="text" id="editorial" name="editorial">
        </div>

        <div id="campos-artes_visuales" class="campos-extra">
          <label for="tecnica">Técnica/Soporte:</label>
          <input type="text" id="tecnica" name="tecnica" placeholder="Ej: Óleo sobre lienzo, Acrílico, Xilografía">

          <label for="dimensiones_av">Dimensiones:</label>
          <input type="text" id="dimensiones_av" name="dimensiones_av" placeholder="Ej: 120cm x 80cm">

          <label for="ano_creacion">Año de Creación:</label>
          <input type="number" id="ano_creacion" name="ano_creacion" placeholder="Ej: 2024" min="1900" max="2025">
        </div>

        <div id="campos-escultura" class="campos-extra">
          <label for="materiales_esc">Materiales:</label>
          <input type="text" id="materiales_esc" name="materiales_esc"
            placeholder="Ej: Madera, Metal reciclado, Arcilla">

          <label for="dimensiones_esc">Dimensiones (Alto x Ancho x Prof.):</label>
          <input type="text" id="dimensiones_esc" name="dimensiones_esc" placeholder="Ej: 50cm x 30cm x 25cm">

          <label for="apta_exterior">¿Apta para exterior?</label>
          <select id="apta_exterior" name="apta_exterior">
            <option value="si">Sí</option>
            <option value="no" selected>No</option>
          </select>
        </div>

        <div id="campos-artesanias" class="campos-extra">
          <label for="material_art">Material Principal:</label>
          <input type="text" id="material_art" name="material_art" placeholder="Ej: Cuero, Plata, Fibra Vegetal">

          <label for="tecnica_art">Técnica Artesanal:</label>
          <input type="text" id="tecnica_art" name="tecnica_art" placeholder="Ej: Cestería, Telar criollo, Orfebrería">

          <label for="origen_region">Origen/Región de la técnica (opcional):</label>
          <input type="text" id="origen_region" name="origen_region">
        </div>

        <div id="campos-danza" class="campos-extra">
          <label for="compania_danza">Compañía / Elenco:</label>
          <input type="text" id="compania_danza" name="compania_danza">

          <label for="duracion_danza">Duración de la obra:</label>
          <input type="text" id="duracion_danza" name="duracion_danza" placeholder="Ej: 60 minutos">

          <label for="ficha_danza">Ficha Técnica (resumida):</label>
          <textarea id="ficha_danza" name="ficha_danza" rows="4"
            placeholder="Dirección: Nombre Apellido&#10;Intérpretes: Nombre Apellido..."></textarea>
        </div>

        <div id="campos-teatro" class="campos-extra">
          <label for="compania_teatro">Compañía / Elenco:</label>
          <input type="text" id="compania_teatro" name="compania_teatro">

          <label for="duracion_teatro">Duración de la obra:</label>
          <input type="text" id="duracion_teatro" name="duracion_teatro" placeholder="Ej: 90 minutos">

          <label for="ficha_teatro">Ficha Técnica (resumida):</label>
          <textarea id="ficha_teatro" name="ficha_teatro" rows="4"
            placeholder="Dramaturgia: Nombre Apellido&#10;Dirección: Nombre Apellido&#10;Elenco: Nombre Apellido..."></textarea>
        </div>

      </div>

      <label for="multimedia">
        <i class="fa-solid fa-link fa-fw"></i> Enlaces a Fotos/Videos:
      </label>
      <div id="multimedia-container">
      </div>


      <button type="submit" class="btn-guardar">
        <i class="fa-solid fa-save"></i> Guardar Borrador
      </button>

      <button type="button" id="btn-enviar-validacion" class="btn-enviar">
        <i class="fa-solid fa-paper-plane"></i> Enviar para Validación
      </button>
    </form>
  </main>

  <div id="footer"></div>

  <script src="../../../../static/js/main.js"></script>
  <script src="../../../../static/js/navbar.js"></script>
  <script>
    document.getElementById("form-borrador").addEventListener("submit", function (e) {
      e.preventDefault();
      alert("✅ Borrador guardado correctamente.");
      // Aquí podrías guardar los datos en localStorage, o enviarlos por fetch
    });
  </script>
  <script>
    // Se ejecuta cuando todo el HTML está cargado
    document.addEventListener('DOMContentLoaded', () => {

      // --- LÓGICA PARA EL FORMULARIO ---
      const form = document.getElementById("form-borrador");
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        alert("✅ Borrador guardado correctamente.");

        // Aquí puedes agregar la lógica para guardar los datos
        const formData = new FormData(form);
        for (let [key, value] of formData.entries()) {
          console.log(key, value);
        }
      });

      // --- LÓGICA PARA ENLACES DINÁMICOS (+) Y (-) ---
      const multimediaContainer = document.getElementById("multimedia-container");

      function createLinkRow(isFirstRow = false) {
        const row = document.createElement("div");
        row.className = "link-input-row animate__animated animate__fadeIn";

        const input = document.createElement("input");
        input.type = "url";
        input.name = "multimedia[]";
        input.placeholder = "Ej. https://mi-portfolio.com/mi-obra.jpg";
        input.required = true;

        const actionButton = document.createElement("button");
        actionButton.type = "button";
        actionButton.className = "btn-link-action";

        if (isFirstRow) {
          actionButton.classList.add("btn-add-link");
          actionButton.innerHTML = '<i class="fa-solid fa-plus"></i>';
          actionButton.addEventListener("click", () => createLinkRow());
        } else {
          actionButton.classList.add("btn-remove-link");
          actionButton.innerHTML = '<i class="fa-solid fa-trash"></i>';
          actionButton.addEventListener("click", () => {
            row.classList.add("animate__fadeOut");
            setTimeout(() => row.remove(), 400);
          });
        }

        row.appendChild(input);
        row.appendChild(actionButton);
        multimediaContainer.appendChild(row);
      }

      // Crea la primera fila de enlaces al cargar
      createLinkRow(true);

      // --- LÓGICA PARA CAMPOS CONDICIONALES POR CATEGORÍA ---
      const categoriaSelect = document.getElementById('categoria');
      const todosLosCamposExtra = document.querySelectorAll('.campos-extra');

      categoriaSelect.addEventListener('change', function () {
        // 1. Oculta todos los divs de campos extra
        todosLosCamposExtra.forEach(div => {
          div.style.display = 'none';
        });

        // 2. Obtiene el valor de la categoría seleccionada (ej: "musica")
        const categoriaSeleccionada = this.value;

        if (categoriaSeleccionada) {
          // 3. Busca el div correspondiente (ej: "campos-musica")
          const divAMostrar = document.getElementById('campos-' + categoriaSeleccionada);

          // 4. Si existe, lo muestra con una animación
          if (divAMostrar) {
            divAMostrar.style.display = 'block';
            divAMostrar.classList.add('animate__animated', 'animate__fadeIn');
          }
        }
      });

    }); // Fin del DOMContentLoaded
  </script>
</body>

</html>